customElements.get("sticky-header")||customElements.define("sticky-header",class extends HTMLElement{constructor(){super()}connectedCallback(){this.currentScrollTop=0,this.preventReveal=!1,this.preventResize=!1,this.header=document.querySelector(".section-header"),this.headerTop=document.querySelector(".header-top"),this.predictiveSearch=this.querySelector("predictive-search"),this.onScrollHandler=this.onScroll.bind(this),this.isToggleNav=this.classList.contains("toggle-nav"),this.setupWindowResizeEvent(),this.calculateThreshold(),this.hideHeaderOnScrollUp=()=>this.preventReveal=!0,this.addEventListener("preventHeaderReveal",this.hideHeaderOnScrollUp),this.isToggleNav&&(this.header.classList.add("toggle-nav"),this.toggleNavButton=this.querySelector(".header__toggle-nav-button"),this.onToggleNavClickHandler=this.onToggleNavClick.bind(this),this.toggleNavButton.addEventListener("click",this.onToggleNavClickHandler),this.nav=this.querySelector(".header__inline-menu"),setTimeout(()=>{document.body.style.setProperty("--nav-height",`${this.nav.clientHeight}px`)},500)),this.onScroll(),window.addEventListener("scroll",this.onScrollHandler,!1)}disconnectedCallback(){window.removeEventListener("scroll",this.onScrollHandler),window.removeEventListener("resize",this.debouncedOnWindowResize),this.toggleNavButton&&this.toggleNavButton.removeEventListener("click",this.onToggleNavClickHandler)}calculateHeaderHeight(){this.headerHeight=0,this.fullHeaderHeight=0,this.querySelectorAll(":scope > *").forEach(element=>{this.fullHeaderHeight+=element.clientHeight,element.classList.contains("header")&&(this.headerHeight=element.clientHeight,this.fullHeaderHeight+=parseInt(window.getComputedStyle(element,null).getPropertyValue("margin-top")))})}calculateThreshold(){this.headerBoundTop=this.header.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)+this.fullHeaderHeight,this.threshold=this.headerBoundTop+100,this.dataset.stickyType=="always"&&(this.threshold+=100)}onScroll(){const scrollTop=document.documentElement.scrollTop;if(!(this.predictiveSearch&&this.predictiveSearch.isOpen)){if(scrollTop>this.currentScrollTop&scrollTop>this.headerBoundTop)if(this.dataset.stickyType=="always")this.openStickyHeader(scrollTop);else{if(this.preventHide||this.dataset.stickyType=="always")return;requestAnimationFrame(this.hide.bind(this))}else scrollTop<this.currentScrollTop&&scrollTop>this.headerBoundTop?this.openStickyHeader(scrollTop):scrollTop<=this.headerBoundTop&&requestAnimationFrame(this.reset.bind(this));this.currentScrollTop=scrollTop}}openStickyHeader(scrollTop){!this.preventReveal&&scrollTop>this.threshold?requestAnimationFrame(this.reveal.bind(this)):(window.clearTimeout(this.isScrolling),this.isScrolling=setTimeout(()=>{this.preventReveal=!1},66),requestAnimationFrame(this.hide.bind(this)))}setupWindowResizeEvent(){this.calculateHeaderHeight(),document.body.style.setProperty("--header-height",`${this.headerHeight}px`),window.innerWidth>=990?document.body.style.setProperty("--sticky-header-height-desktop",`${this.fullHeaderHeight}px`):document.body.style.setProperty("--sticky-header-height-mobile",`${this.fullHeaderHeight}px`),this.debouncedOnWindowResize=debounce(event=>{this.onWindowResize(event)},500),window.addEventListener("resize",this.debouncedOnWindowResize,!1)}onWindowResize(){if(this.preventResize)return;let headerHeight;if(this.isToggleNav&&window.innerWidth>=990){const navHeight=this.nav.clientHeight;document.body.style.setProperty("--nav-height",`${navHeight}px`),this.header.classList.contains("shopify-section-header-sticky")&&!this.header.classList.contains("open-nav")?headerHeight=this.header.querySelector("header").clientHeight+navHeight+11:headerHeight=this.header.querySelector("header").clientHeight}else headerHeight=this.header.querySelector("header").clientHeight;document.body.style.setProperty("--header-height",`${headerHeight}px`);const stickyHeaderHeight=headerHeight+this.getHeaderTopHeight();window.innerWidth>=990?document.body.style.setProperty("--sticky-header-height-desktop",`${stickyHeaderHeight}px`):document.body.style.setProperty("--sticky-header-height-mobile",`${stickyHeaderHeight}px`),this.calculateThreshold()}getHeaderTopHeight(){return this.headerTop?this.headerTop.clientHeight:0}onToggleNavClick(){document.body.style.setProperty("--nav-height",`${this.nav.clientHeight}px`),this.header.classList.toggle("open-nav")}hide(){this.header.classList.add("shopify-section-header-hidden","shopify-section-header-sticky"),this.closeMenuDisclosure(),this.closeSearchModal(),this.closeToggleNav()}reveal(){this.header.classList.add("shopify-section-header-sticky","animate"),this.header.classList.remove("shopify-section-header-hidden"),this.dataset.toggleNav&&this.toggleNavButton.removeAttribute("tabindex")}reset(){this.header.classList.remove("shopify-section-header-hidden","shopify-section-header-sticky","animate"),this.closeToggleNav()}closeToggleNav(){this.dataset.toggleNav&&(this.toggleNavButton.setAttribute("tabindex","-1"),this.header.classList.remove("open-nav"))}closeMenuDisclosure(){this.disclosures=this.disclosures||this.header.querySelectorAll("header-menu"),this.disclosures.forEach(disclosure=>disclosure.close())}closeSearchModal(){this.searchModal=this.searchModal||this.header.querySelector("details-modal"),this.searchModal&&this.searchModal.close(!1)}setPreventHide(value){this.preventHide=value}});
//# sourceMappingURL=/cdn/shop/t/7/assets/sticky-header.js.map?v=90556850190994355021715898701
